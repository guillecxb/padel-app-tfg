"use strict";(self.webpackChunkpadel_app=self.webpackChunkpadel_app||[]).push([[1279],{16811:(e,r,t)=>{t.d(r,{Nv:()=>l,oZ:()=>c,rq:()=>i});var s=t(21858),a=t(38826),o=t(21895);const n=a.P.injectEndpoints({endpoints:e=>({customers:e.query({query:()=>"/customers/",providesTags:[o._.Customers]}),createCustomer:e.mutation({query:e=>({url:"".concat(s.yq,"/customers/"),method:"POST",formData:!0,headers:{[s.Vb]:s.xS},body:e}),invalidatesTags:[o._.Customers]}),updateCustomer:e.mutation({query:e=>{let{body:r,customerId:t}=e;return{url:"".concat(s.yq,"/customers/").concat(t,"/"),method:"PATCH",formData:!0,headers:{[s.Vb]:s.xS},body:r}},invalidatesTags:[o._.Customers]})})}),{useCustomersQuery:i,useCreateCustomerMutation:l,useUpdateCustomerMutation:c}=n},47926:(e,r,t)=>{t.d(r,{DR:()=>i,Tj:()=>l,UQ:()=>n,a8:()=>c,x0:()=>u});t(21858);var s=t(66984),a=t(21895);const o=s.J.injectEndpoints({endpoints:e=>({availableCourts:e.query({query:e=>{let{customer_id:r,date:t}=e;return{url:"/customers/".concat(r,"/available-courts/"),params:{date:t}}},providesTags:[a.n.Reservations]}),createReservation:e.mutation({query:e=>{let{user_id:r,court_id:t,reservation_time:s,customer_id:a}=e;return{url:"/reservations/",method:"POST",body:{user_id:r,court_id:t,reservation_time:s,customer_id:a}}},providesTags:[a.n.Reservations]}),getUserReservations:e.query({query:e=>{let{user_id:r}=e;return{url:"/users/".concat(r,"/reservations/")}},providesTags:[a.n.Reservations]}),deleteReservation:e.mutation({query:e=>({url:"/reservations/".concat(e,"/"),method:"DELETE"}),invalidatesTags:[a.n.Reservations]}),getCustomerReservations:e.query({query:e=>{let{customer_id:r}=e;return{url:"/customers/".concat(r,"/reservations/")}},providesTags:[a.n.Reservations]}),getCustomerReservationsByDate:e.query({query:e=>{let{customer_id:r,from_date:t}=e;return{url:"/customers/".concat(r,"/reservations-by-date/"),params:t?{from_date:t}:{}}},providesTags:[a.n.Reservations]}),getReservationCountByCourt:e.query({query:e=>{let{customer_id:r}=e;return{url:"/customers/".concat(r,"/reservations/count-by-court/")}},providesTags:[a.n.Reservations]})})}),{useAvailableCourtsQuery:n,useCreateReservationMutation:i,useGetUserReservationsQuery:l,useDeleteReservationMutation:c,useGetCustomerReservationsQuery:u,useGetCustomerReservationsByDateQuery:d,useGetReservationCountByCourtQuery:m}=o},31279:(e,r,t)=>{t.r(r),t.d(r,{default:()=>D});var s=t(47313),a=t(9506),o=t(61113),n=t(24631),i=t(9019),l=t(69099),c=t(94469),u=t(33604),d=t(96467),m=t(97762),v=t(4117),p=t(85281),x=t(43394),h=t(44948),y=t(64507),Z=t(47926),g=t(97594),j=t(59863),C=t(89600),b=t(58467),R=t(16811),_=t(67234),T=t(46417);const D=()=>{var e,r;const t=(0,b.TH)(),D=(0,b.s0)(),[f,q]=(0,s.useState)(null),[M,S]=(0,s.useState)(null),[w,k]=(0,s.useState)(null),[H,P]=(0,s.useState)(!1),[A,E]=(0,s.useState)(!1),[Q,I]=(0,s.useState)(!1),{role:B,id:F}=(0,g.v9)(j.jo),[U,G]=(0,s.useState)((null===(e=t.state)||void 0===e?void 0:e.customerId)||null),[N,O]=(0,s.useState)((null===(r=t.state)||void 0===r?void 0:r.customerLocation)||""),[L]=(0,Z.DR)(),{data:V,isLoading:z}=(0,R.rq)(),J=new Date,W=new Date(J);W.setMonth(J.getMonth()+2);const K=[];for(let s=9;s<=22.5;s+=1.5){const e=Math.floor(s),r=s%1===.5?30:0;K.push(new Date(0,0,0,e,r))}const X=f&&M?"".concat((0,C.Z)(new Date(f),"yyyy-MM-dd"),"T").concat((0,C.Z)(M,"HH:mm:ss")):null,{data:Y=[]}=(0,Z.UQ)({customer_id:U,date:X},{skip:!X||!U}),$=()=>{D(_.Z6.membersArea)};return(0,T.jsx)(x._,{dateAdapter:y.H,children:(0,T.jsxs)(a.Z,{sx:{padding:"16px"},children:[(0,T.jsx)(o.Z,{variant:"h5",sx:{textAlign:"center",marginBottom:4},children:U?"Reserva para: ".concat(N):"Seleccione un club para reservar"}),!U&&!z&&(0,T.jsxs)(n.Z,{select:!0,label:"Seleccione un club",value:U||"",onChange:e=>{const r=e.target.value,t=null===V||void 0===V?void 0:V.results.find((e=>e.id===parseInt(r)));G(r),O(t?t.location:"")},SelectProps:{native:!0},fullWidth:!0,children:[(0,T.jsx)("option",{value:"",disabled:!0,hidden:!0})," ",null===V||void 0===V?void 0:V.results.map((e=>(0,T.jsx)("option",{value:e.id,children:e.location},e.id)))]}),(0,T.jsx)(a.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:4},children:(0,T.jsx)(h.M,{label:"Fecha de reserva",value:f,onChange:e=>q(e),renderInput:e=>(0,T.jsx)(n.Z,{...e}),minDate:J,maxDate:W})}),f&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(o.Z,{variant:"h6",sx:{marginTop:4,textAlign:"center"},children:"Seleccione una hora"}),(0,T.jsx)(i.ZP,{container:!0,spacing:2,sx:{marginTop:2},children:K.map(((e,r)=>(0,T.jsx)(i.ZP,{item:!0,xs:6,md:3,children:(0,T.jsxs)(l.Z,{variant:M===e?"contained":"outlined",onClick:()=>S(e),children:[(0,C.Z)(e,"HH:mm")," - ",(0,C.Z)(new Date(e.getTime()+54e5),"HH:mm")]})},r)))})]}),M&&Y.length>0&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(o.Z,{variant:"h6",sx:{marginTop:4,textAlign:"center"},children:"Seleccione una pista"}),(0,T.jsx)(i.ZP,{container:!0,spacing:2,sx:{marginTop:2},children:Y.map((e=>(0,T.jsx)(i.ZP,{item:!0,xs:6,md:3,children:(0,T.jsxs)(a.Z,{sx:{padding:2,border:"2px solid",borderColor:e.available?"primary.main":"grey.400",backgroundColor:e.available?w===e.court_id?"primary.light":"white":"grey.200",color:e.available?"text.primary":"grey.600",textAlign:"center",borderRadius:1,cursor:e.available?"pointer":"not-allowed",pointerEvents:e.available?"auto":"none"},onClick:()=>{return r=e.court_id,void(Y.find((e=>e.court_id===r)).available&&k(r));var r},children:[(0,T.jsx)(o.Z,{variant:"h6",children:e.court_name}),(0,T.jsx)(o.Z,{variant:"body2",children:e.available?"Disponible":"Ocupada"})]})},e.court_id)))})]}),w&&(0,T.jsx)(a.Z,{sx:{marginTop:4,textAlign:"center"},children:(0,T.jsxs)(l.Z,{variant:"contained",color:"primary",onClick:()=>{P(!0)},children:["Reservar Pista ",w]})}),(0,T.jsxs)(c.Z,{open:H,onClose:()=>P(!1),children:[(0,T.jsx)(u.Z,{children:"Confirmar Reserva"}),(0,T.jsx)(d.Z,{children:(0,T.jsxs)(m.Z,{children:["\xbfEst\xe1s seguro de reservar la pista ",w," para el ",(0,C.Z)(new Date(X),"dd/MM/yyyy HH:mm"),"?"]})}),(0,T.jsxs)(v.Z,{children:[(0,T.jsx)(l.Z,{onClick:()=>P(!1),color:"secondary",children:"Cancelar"}),(0,T.jsx)(l.Z,{onClick:async()=>{E(!0);try{await L({user_id:F,court_id:w,reservation_time:X,customer_id:parseInt(U)}).unwrap(),E(!1),P(!1),I(!0)}catch(e){E(!1),console.error("Error al crear la reserva:",e)}},color:"primary",disabled:A,children:A?(0,T.jsx)(p.Z,{size:24}):"Reservar"})]})]}),(0,T.jsxs)(c.Z,{open:Q,onClose:$,children:[(0,T.jsx)(u.Z,{children:"Reserva exitosa"}),(0,T.jsx)(d.Z,{children:(0,T.jsxs)(m.Z,{children:["\xa1Reserva confirmada para la pista ",w," el ",(0,C.Z)(new Date(X),"dd/MM/yyyy HH:mm"),"!"]})}),(0,T.jsxs)(v.Z,{children:[(0,T.jsx)(l.Z,{onClick:()=>{I(!1),q(null),S(null),k(null)},color:"primary",children:"Reservar otra pista"}),(0,T.jsx)(l.Z,{onClick:$,color:"secondary",children:"Ir a mis reservas"})]})]})]})})}},97762:(e,r,t)=>{t.d(r,{Z:()=>y});var s=t(63366),a=t(87462),o=t(47313),n=t(83061),i=t(21921),l=t(17592),c=t(77342),u=t(61113),d=t(77430),m=t(32298);function v(e){return(0,m.Z)("MuiDialogContentText",e)}(0,d.Z)("MuiDialogContentText",["root"]);var p=t(46417);const x=["children","className"],h=(0,l.ZP)(u.Z,{shouldForwardProp:e=>(0,l.FO)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,r)=>r.root})({}),y=o.forwardRef((function(e,r){const t=(0,c.Z)({props:e,name:"MuiDialogContentText"}),{className:o}=t,l=(0,s.Z)(t,x),u=(e=>{const{classes:r}=e,t=(0,i.Z)({root:["root"]},v,r);return(0,a.Z)({},r,t)})(l);return(0,p.jsx)(h,(0,a.Z)({component:"p",variant:"body1",color:"text.secondary",ref:r,ownerState:l,className:(0,n.Z)(u.root,o)},t,{classes:u}))}))}}]);