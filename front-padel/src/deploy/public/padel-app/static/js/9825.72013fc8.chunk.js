"use strict";(self.webpackChunkpadel_app=self.webpackChunkpadel_app||[]).push([[9825],{16811:(e,t,r)=>{r.d(t,{Nv:()=>l,oZ:()=>c,rq:()=>i});var s=r(21858),o=r(38826),n=r(21895);const a=o.P.injectEndpoints({endpoints:e=>({customers:e.query({query:()=>"/customers/",providesTags:[n._.Customers]}),createCustomer:e.mutation({query:e=>({url:"".concat(s.yq,"/customers/"),method:"POST",formData:!0,headers:{[s.Vb]:s.xS},body:e}),invalidatesTags:[n._.Customers]}),updateCustomer:e.mutation({query:e=>{let{body:t,customerId:r}=e;return{url:"".concat(s.yq,"/customers/").concat(r,"/"),method:"PATCH",formData:!0,headers:{[s.Vb]:s.xS},body:t}},invalidatesTags:[n._.Customers]})})}),{useCustomersQuery:i,useCreateCustomerMutation:l,useUpdateCustomerMutation:c}=a},47926:(e,t,r)=>{r.d(t,{DR:()=>i,F3:()=>v,Tj:()=>l,UQ:()=>a,a8:()=>c,x0:()=>u});r(21858);var s=r(66984),o=r(21895);const n=s.J.injectEndpoints({endpoints:e=>({availableCourts:e.query({query:e=>{let{customer_id:t,date:r}=e;return{url:"/customers/".concat(t,"/available-courts/"),params:{date:r}}},providesTags:[o.n.Reservations]}),createReservation:e.mutation({query:e=>{let{user_id:t,court_id:r,reservation_time:s,customer_id:o}=e;return{url:"/reservations/",method:"POST",body:{user_id:t,court_id:r,reservation_time:s,customer_id:o}}},providesTags:[o.n.Reservations]}),getUserReservations:e.query({query:e=>{let{user_id:t}=e;return{url:"/users/".concat(t,"/reservations/")}},providesTags:[o.n.Reservations]}),deleteReservation:e.mutation({query:e=>({url:"/reservations/".concat(e,"/"),method:"DELETE"}),invalidatesTags:[o.n.Reservations]}),getCustomerReservations:e.query({query:e=>{let{customer_id:t}=e;return{url:"/customers/".concat(t,"/reservations/")}},providesTags:[o.n.Reservations]}),getCustomerReservationsByDate:e.query({query:e=>{let{customer_id:t,from_date:r}=e;return{url:"/customers/".concat(t,"/reservations-by-date/"),params:r?{from_date:r}:{}}},providesTags:[o.n.Reservations]}),getReservationCountByCourt:e.query({query:e=>{let{customer_id:t}=e;return{url:"/customers/".concat(t,"/reservations/count-by-court/")}},providesTags:[o.n.Reservations]}),createReview:e.mutation({query:e=>{let{court_id:t,user_id:r,reservation_id:s,rating:o,comment:n}=e;return{url:"/reviews/",method:"POST",body:{court_id:t,user_id:r,reservation_id:s,rating:o,comment:n}}},invalidatesTags:[o.n.Reservations]})})}),{useAvailableCourtsQuery:a,useCreateReservationMutation:i,useGetUserReservationsQuery:l,useDeleteReservationMutation:c,useGetCustomerReservationsQuery:u,useGetCustomerReservationsByDateQuery:d,useGetReservationCountByCourtQuery:m,useCreateReviewMutation:v}=n},79825:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var s=r(47313),o=r(9506),n=r(61113),a=r(24631),i=r(9019),l=r(69099),c=r(94469),u=r(33604),d=r(96467),m=r(97762),v=r(4117),x=r(85281),h=r(43394),p=r(44948),g=r(64507),y=r(47926),Z=r(29104),j=r(16811),b=r(89600),C=r(58467),_=r(67234),T=r(68012),R=r(46417);const f=()=>{var e,t;const r=(0,C.TH)(),f=(0,C.s0)(),[k,w]=(0,s.useState)(null),[D,q]=(0,s.useState)(null),[M,S]=(0,s.useState)(null),[H,P]=(0,s.useState)(null),[A,F]=(0,s.useState)(!1),[B,I]=(0,s.useState)(!1),[Q,E]=(0,s.useState)(!1),L=(0,T.Qn)(),[U,G]=(0,s.useState)((null===(e=r.state)||void 0===e?void 0:e.customerId)||null),[N,O]=(0,s.useState)((null===(t=r.state)||void 0===t?void 0:t.customerLocation)||""),[V]=(0,y.DR)(),{data:W,isLoading:z}=(0,Z.xY)({params:{customer_id:U}}),{data:J,isLoading:Y}=(0,j.rq)(),K=new Date,X=new Date(K);X.setMonth(K.getMonth()+2);const $=[];for(let s=9;s<=22.5;s+=1.5){const e=Math.floor(s),t=s%1===.5?30:0;$.push(new Date(0,0,0,e,t))}const ee=D&&M?"".concat((0,b.Z)(new Date(D),"yyyy-MM-dd"),"T").concat((0,b.Z)(M,"HH:mm:ss")):null,{data:te=[]}=(0,y.UQ)({customer_id:U,date:ee},{skip:!ee||!U}),re=()=>{f(_.Z6.membersArea)};return(0,R.jsx)(h._,{dateAdapter:g.H,children:(0,R.jsxs)(o.Z,{sx:{padding:"16px"},children:[(0,R.jsx)(n.Z,{variant:"h5",sx:{textAlign:"center",marginBottom:4},children:U?L("bookingFor",{location:N}):L("selectClubToBook")}),!U&&!Y&&(0,R.jsxs)(a.Z,{select:!0,label:L("selectClubLabel"),value:U||"",onChange:e=>{const t=e.target.value,r=null===J||void 0===J?void 0:J.results.find((e=>e.id===parseInt(t)));G(t),O(r?r.location:"")},SelectProps:{native:!0},fullWidth:!0,children:[(0,R.jsx)("option",{value:"",disabled:!0,hidden:!0}),null===J||void 0===J?void 0:J.results.map((e=>(0,R.jsx)("option",{value:e.id,children:e.location},e.id)))]}),U&&(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(a.Z,{select:!0,label:L("selectUserLabel"),value:k||"",onChange:e=>w(e.target.value),SelectProps:{native:!0},fullWidth:!0,sx:{marginTop:4},children:[(0,R.jsx)("option",{value:"",disabled:!0,hidden:!0}),null===W||void 0===W?void 0:W.results.map((e=>(0,R.jsx)("option",{value:e.id,children:e.name||e.username||"Usuario ".concat(e.id)},e.id)))]})}),k&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(o.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:4},children:(0,R.jsx)(p.M,{label:L("bookingDateLabel"),value:D,onChange:e=>q(e),renderInput:e=>(0,R.jsx)(a.Z,{...e}),minDate:K,maxDate:X})}),D&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(n.Z,{variant:"h6",sx:{marginTop:4,textAlign:"center"},children:L("selectTime")}),(0,R.jsx)(i.ZP,{container:!0,spacing:2,sx:{marginTop:2},children:$.map(((e,t)=>(0,R.jsx)(i.ZP,{item:!0,xs:6,md:3,children:(0,R.jsxs)(l.Z,{variant:M===e?"contained":"outlined",onClick:()=>S(e),children:[(0,b.Z)(e,"HH:mm")," - ",(0,b.Z)(new Date(e.getTime()+54e5),"HH:mm")]})},t)))})]}),M&&te.length>0&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(n.Z,{variant:"h6",sx:{marginTop:4,textAlign:"center"},children:L("selectCourt")}),(0,R.jsx)(i.ZP,{container:!0,spacing:2,sx:{marginTop:2},children:te.map((e=>{var t;return(0,R.jsx)(i.ZP,{item:!0,xs:6,md:3,children:(0,R.jsxs)(o.Z,{sx:{padding:2,border:"2px solid",borderColor:e.available?"primary.main":"grey.400",backgroundColor:e.available?H===e.court_id?"primary.light":"white":"grey.200",color:e.available?"text.primary":"grey.600",textAlign:"center",borderRadius:1,cursor:e.available?"pointer":"not-allowed",pointerEvents:e.available?"auto":"none",display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"},onClick:()=>{return t=e.court_id,void(te.find((e=>e.court_id===t)).available&&P(t));var t},children:[(0,R.jsx)(n.Z,{variant:"h6",children:e.court_name}),(0,R.jsx)(n.Z,{variant:"body2",children:e.available?L("available"):L("occupied")}),e.review_count>0?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(n.Z,{variant:"body2",sx:{mt:1},children:["\u2b50 ",e.average_rating.toFixed(1)," / 5"]}),(0,R.jsxs)(n.Z,{variant:"caption",sx:{fontStyle:"italic"},children:['"',null===(t=e.reviews[e.reviews.length-1])||void 0===t?void 0:t.comment,'"']})]}):(0,R.jsx)(n.Z,{variant:"caption",sx:{mt:1,color:"text.secondary"},children:L("noReviews")})]})},e.court_id)}))})]}),H&&(0,R.jsx)(o.Z,{sx:{marginTop:4,textAlign:"center"},children:(0,R.jsx)(l.Z,{variant:"contained",color:"primary",onClick:()=>{F(!0)},children:L("bookCourt",{courtId:H})})})]}),(0,R.jsxs)(c.Z,{open:A,onClose:()=>F(!1),children:[(0,R.jsx)(u.Z,{children:L("confirmBookingTitle")}),(0,R.jsx)(d.Z,{children:(0,R.jsx)(m.Z,{children:L("confirmBookingText",{courtId:H,date:(0,b.Z)(new Date(ee),"dd/MM/yyyy HH:mm")})})}),(0,R.jsxs)(v.Z,{children:[(0,R.jsx)(l.Z,{onClick:()=>F(!1),color:"secondary",children:L("cancel")}),(0,R.jsx)(l.Z,{onClick:async()=>{I(!0);try{await V({user_id:k,court_id:H,reservation_time:ee,customer_id:parseInt(U)}).unwrap(),I(!1),F(!1),E(!0)}catch(e){I(!1),console.error("Error al crear la reserva:",e)}},color:"primary",disabled:B,children:B?(0,R.jsx)(x.Z,{size:24}):L("book")})]})]}),(0,R.jsxs)(c.Z,{open:Q,onClose:re,children:[(0,R.jsx)(u.Z,{children:L("bookingSuccessTitle")}),(0,R.jsx)(d.Z,{children:(0,R.jsx)(m.Z,{children:L("bookingSuccessText",{courtId:H,date:(0,b.Z)(new Date(ee),"dd/MM/yyyy HH:mm")})})}),(0,R.jsxs)(v.Z,{children:[(0,R.jsx)(l.Z,{onClick:()=>{E(!1),q(null),S(null),P(null)},color:"primary",children:L("bookAnother")}),(0,R.jsx)(l.Z,{onClick:re,color:"secondary",children:L("goToMyBookings")})]})]})]})})}},97762:(e,t,r)=>{r.d(t,{Z:()=>g});var s=r(63366),o=r(87462),n=r(47313),a=r(83061),i=r(21921),l=r(17592),c=r(77342),u=r(61113),d=r(77430),m=r(32298);function v(e){return(0,m.Z)("MuiDialogContentText",e)}(0,d.Z)("MuiDialogContentText",["root"]);var x=r(46417);const h=["children","className"],p=(0,l.ZP)(u.Z,{shouldForwardProp:e=>(0,l.FO)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),g=n.forwardRef((function(e,t){const r=(0,c.Z)({props:e,name:"MuiDialogContentText"}),{className:n}=r,l=(0,s.Z)(r,h),u=(e=>{const{classes:t}=e,r=(0,i.Z)({root:["root"]},v,t);return(0,o.Z)({},t,r)})(l);return(0,x.jsx)(p,(0,o.Z)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:l,className:(0,a.Z)(u.root,n)},r,{classes:u}))}))}}]);