"use strict";(self.webpackChunkpadel_app=self.webpackChunkpadel_app||[]).push([[2741],{47926:(e,t,r)=>{r.d(t,{DR:()=>o,F3:()=>m,Tj:()=>u,UQ:()=>n,a8:()=>d,x0:()=>c});r(21858);var s=r(66984),a=r(21895);const i=s.J.injectEndpoints({endpoints:e=>({availableCourts:e.query({query:e=>{let{customer_id:t,date:r}=e;return{url:"/customers/".concat(t,"/available-courts/"),params:{date:r}}},providesTags:[a.n.Reservations]}),createReservation:e.mutation({query:e=>{let{user_id:t,court_id:r,reservation_time:s,customer_id:a}=e;return{url:"/reservations/",method:"POST",body:{user_id:t,court_id:r,reservation_time:s,customer_id:a}}},providesTags:[a.n.Reservations]}),getUserReservations:e.query({query:e=>{let{user_id:t}=e;return{url:"/users/".concat(t,"/reservations/")}},providesTags:[a.n.Reservations]}),deleteReservation:e.mutation({query:e=>({url:"/reservations/".concat(e,"/"),method:"DELETE"}),invalidatesTags:[a.n.Reservations]}),getCustomerReservations:e.query({query:e=>{let{customer_id:t}=e;return{url:"/customers/".concat(t,"/reservations/")}},providesTags:[a.n.Reservations]}),getCustomerReservationsByDate:e.query({query:e=>{let{customer_id:t,from_date:r}=e;return{url:"/customers/".concat(t,"/reservations-by-date/"),params:r?{from_date:r}:{}}},providesTags:[a.n.Reservations]}),getReservationCountByCourt:e.query({query:e=>{let{customer_id:t}=e;return{url:"/customers/".concat(t,"/reservations/count-by-court/")}},providesTags:[a.n.Reservations]}),createReview:e.mutation({query:e=>{let{court_id:t,user_id:r,reservation_id:s,rating:a,comment:i}=e;return{url:"/reviews/",method:"POST",body:{court_id:t,user_id:r,reservation_id:s,rating:a,comment:i}}},invalidatesTags:[a.n.Reservations]})})}),{useAvailableCourtsQuery:n,useCreateReservationMutation:o,useGetUserReservationsQuery:u,useDeleteReservationMutation:d,useGetCustomerReservationsQuery:c,useGetCustomerReservationsByDateQuery:l,useGetReservationCountByCourtQuery:v,useCreateReviewMutation:m}=i},82741:(e,t,r)=>{r.r(t),r.d(t,{default:()=>x});var s=r(47313),a=r(9506),i=r(85281),n=r(61113),o=r(9019),u=r(70501),d=r(89600),c=r(47926),l=r(58467),v=r(68012),m=r(46417);const x=()=>{const[e,t]=(0,s.useState)(new Date),r=(0,v.Qn)(),{customerId:x}=(0,l.UO)(),{data:h=[],isLoading:g}=(0,c.UQ)({customer_id:x,date:e.toISOString()}),{data:y=[],isLoading:p}=(0,c.x0)({customer_id:x});if((0,s.useEffect)((()=>{const e=setInterval((()=>{t(new Date)}),6e4);return()=>clearInterval(e)}),[]),g||p)return(0,m.jsx)(a.Z,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,m.jsx)(i.Z,{})});const _=h.filter((e=>!e.available)).length,j=h.filter((e=>e.available)).length,Z=new Date,b=new Date(Z.getTime()-54e5),R=y.filter((e=>new Date(e.reservation_time)>=b));return(0,m.jsxs)(a.Z,{sx:{padding:4},children:[(0,m.jsx)(n.Z,{variant:"h4",gutterBottom:!0,children:r("dashboardTitle")}),(0,m.jsx)(n.Z,{variant:"h6",sx:{color:"gray",mb:4},children:r("currentStatus",{time:(0,d.Z)(e,"HH:mm:ss"),date:(0,d.Z)(e,"dd/MM/yyyy")})}),(0,m.jsxs)(o.ZP,{container:!0,spacing:3,sx:{mb:4},children:[(0,m.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,m.jsxs)(u.Z,{sx:{padding:3,textAlign:"center"},children:[(0,m.jsx)(n.Z,{variant:"h6",children:r("occupiedCourts")}),(0,m.jsx)(n.Z,{variant:"h4",children:_})]})}),(0,m.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,m.jsxs)(u.Z,{sx:{padding:3,textAlign:"center"},children:[(0,m.jsx)(n.Z,{variant:"h6",children:r("availableCourts")}),(0,m.jsx)(n.Z,{variant:"h4",children:j})]})}),(0,m.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,m.jsxs)(u.Z,{sx:{padding:3,textAlign:"center"},children:[(0,m.jsx)(n.Z,{variant:"h6",children:r("totalReservations")}),(0,m.jsx)(n.Z,{variant:"h4",children:R.length})]})})]}),(0,m.jsx)(n.Z,{variant:"h5",sx:{mb:2},children:r("courtsStatusTitle")}),(0,m.jsx)(o.ZP,{container:!0,spacing:2,children:h.map((e=>(0,m.jsx)(o.ZP,{item:!0,xs:12,md:3,children:(0,m.jsxs)(u.Z,{sx:{padding:2,textAlign:"center",backgroundColor:e.available?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)",borderColor:e.available?"green":"red"},variant:"outlined",children:[(0,m.jsx)(n.Z,{variant:"h6",children:e.court_name}),(0,m.jsx)(n.Z,{variant:"body2",children:e.available?r("available"):r("occupied")})]})},e.court_id)))})]})}}}]);