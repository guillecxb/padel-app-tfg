"use strict";(self.webpackChunkpadel_app=self.webpackChunkpadel_app||[]).push([[9078],{38719:(e,t,a)=>{a.d(t,{U:()=>m});var r,n=a(30168),i=a(47313),s=a(17592),o=a(19860),l=a(48119),d=a(20619),c=a(46417);const u=(0,s.ZP)("img")(r||(r=(0,n.Z)(["\n  width: ","px;\n  height: ","px;\n  ","\n  ","\n  ","\n  border-radius: 4px;\n"])),(e=>{let{width:t}=e;return t}),(e=>{let{height:t}=e;return t}),(e=>{let{hasBorder:t}=e;return!!t&&"padding: 8px;"}),(e=>{let{hasBorder:t}=e;return!!t&&"border: 1px solid #e0e0e0;"}),(e=>{let{hasBorder:t}=e;return!!t&&"box-shadow: 0 0 2px rgba(0, 0, 0, 0.1);"})),m=e=>{let{"data-testid":t,width:a=64,height:r=64,src:n,defaultSrc:s}=e;const[m,p]=(0,i.useState)(!1),h=(0,i.useCallback)((()=>p(!0)),[]),x=(0,o.Z)(),f=(0,i.useMemo)((()=>{if(!n||"None"===n||m)return(0,c.jsx)(d.Z,{color:"primary.main","data-testid":t,variant:"regular",children:s});const e=n.startsWith("http")?"".concat(n,"?").concat(Math.floor(Date.now())):n;return(0,c.jsx)(u,{"data-testid":t,height:r,onError:h,src:e,width:a})}),[n,m,t,r,h,a,s]);return(0,i.useEffect)((()=>{p(!1)}),[n]),(0,c.jsx)(l.Z,{"data-testid":t,sx:{height:r,width:a,backgroundColor:x.palette.background.primary},children:f})}},16811:(e,t,a)=>{a.d(t,{Nv:()=>l,oZ:()=>d,rq:()=>o});var r=a(21858),n=a(38826),i=a(21895);const s=n.P.injectEndpoints({endpoints:e=>({customers:e.query({query:()=>"/customers/",providesTags:[i._.Customers]}),createCustomer:e.mutation({query:e=>({url:"".concat(r.yq,"/customers/"),method:"POST",formData:!0,headers:{[r.Vb]:r.xS},body:e}),invalidatesTags:[i._.Customers]}),updateCustomer:e.mutation({query:e=>{let{body:t,customerId:a}=e;return{url:"".concat(r.yq,"/customers/").concat(a,"/"),method:"PATCH",formData:!0,headers:{[r.Vb]:r.xS},body:t}},invalidatesTags:[i._.Customers]})})}),{useCustomersQuery:o,useCreateCustomerMutation:l,useUpdateCustomerMutation:d}=s},67165:(e,t,a)=>{a.d(t,{B:()=>l});var r=a(58467),n=a(2135),i=a(3404),s=a(61113),o=a(46417);const l=e=>{let{breadcrumbs:t=[],marginBottom:a=1}=e;const l=(0,r.s0)(),d=e=>{const{route:t}=e.currentTarget.dataset;t&&l(t)};return(0,o.jsx)(i.Z,{color:"text.primary","data-testid":"breadcrumb",separator:(0,o.jsx)(s.Z,{mt:"4px",variant:"caption",children:"/"}),sx:{marginBottom:a},children:t.map(((e,t)=>{let{route:a,text:r,dataTestId:i,onClick:l}=e;return a?(0,o.jsx)(s.Z,{color:"text.secondary",component:n.rU,to:a,variant:"caption",...i&&{"data-testid":i},children:r},"tab-".concat(t)):(0,o.jsx)(s.Z,{color:"text.primary",onClick:l||d,sx:l?{cursor:"pointer"}:{},variant:"caption",...i&&{"data-testid":i},children:r},"tab-".concat(t))}))})}},96637:(e,t,a)=>{a.d(t,{FH:()=>s,HJ:()=>i,Zp:()=>n});const r=(e,t,a,r)=>()=>{return n=e(t,{field:a,...r}),"".concat(n);var n},n=(e,t,a)=>r(e,"validations.field-required",t,a),i=(e,t,a)=>r(e,"validations.field-already-taken",t,a),s=(e,t,a)=>r(e,"validations.field-email-invalid",t,a)},9078:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var r=a(61113),n=a(67234),i=a(67165),s=a(47313),o=a(3463),l=a(97594),d=a(58467),c=a(70501),u=a(63984),m=a(16811),p=a(59863),h=a(46400),x=a(96637),f=a(21429),v=a(68012),b=a(25733),g=a(47131),y=a(69099),j=a(38719),Z=a(20619),C=a(17592),w=a(17551);const k=(0,C.ZP)("div")((e=>{let{theme:t,isOver:a}=e;return{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:a?(0,w.Fq)(t.palette.primary.main,.4):"transparent",zIndex:a?100:"auto",border:"3px dashed ".concat(a?t.palette.primary.main:"transparent"),borderRadius:20}}));var _=a(46417);const S=(0,s.forwardRef)(((e,t)=>{let{}=e;const a=(0,s.useRef)(null),n=(0,v.mx)(),[i,o]=(0,s.useState)(),[l,d]=(0,s.useState)(!1),c=(0,s.useMemo)((()=>i?URL.createObjectURL(i):""),[i]),m=(0,s.useMemo)((()=>Boolean(c)),[c]),p=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=e.filter((e=>e.type.startsWith("image/")));if(a.length){const e=t?a[0].getAsFile():a[0];o(e)}};return(0,s.useImperativeHandle)(t,(()=>({file:i})),[i]),(0,_.jsxs)(u.Z,{alignItems:"center",spacing:1.5,sx:{position:"relative"},children:[(0,_.jsx)(k,{isOver:l,onDragEnter:e=>{e.preventDefault(),d(!0)},onDragLeave:e=>{e.preventDefault(),d(!1)},onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault(),d(!1),e.dataTransfer.items?p([...e.dataTransfer.files]):p([...e.dataTransfer.items],!0)}}),(0,_.jsxs)(b.Z,{anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:m?(0,_.jsx)(g.Z,{onClick:()=>o(null),size:"small",children:(0,_.jsx)(Z.Z,{color:"text.primary",variant:"filled",children:"trash-can"})}):void 0,overlap:"circular",children:[(0,_.jsx)(j.U,{defaultSrc:"user-account",src:c}),(0,_.jsx)("input",{accept:"image/*",onChange:e=>{const t=e.target.files&&e.target.files[0];t&&(o(t),e.target.value=null)},ref:a,style:{display:"none"},type:"file"})]}),(0,_.jsx)(y.Z,{color:"primary",endIcon:(0,_.jsx)(Z.Z,{color:"icon.main",variant:"filled",children:"cloud-upload"}),onClick:()=>{var e;null===(e=a.current)||void 0===e||e.click()},variant:"outlined",children:(0,_.jsx)(r.Z,{color:"gradient",variant:"caption2",children:n("upload")})})]})}));S.displayName="CustomerAvatarManager";const T=S;var D=a(79429);const O=()=>{const e=(0,v.mx)(),{errors:t,touched:a}=(0,D.u6)(),r=(0,D.u9)(t,"notification_email"),n=(0,D.u9)(a,"notification_email");return(0,_.jsx)(h.Z.TextField,{"data-testid":"email",fullWidth:!0,helperText:n&&r?void 0:e("fields.emailPlaceholder"),id:"notification_email",inputProps:{maxLength:255},label:e("fields.email"),name:"notification_email",type:"email"})},P=()=>{const e=(0,v.mx)(),{errors:t,touched:a}=(0,D.u6)(),r=(0,D.u9)(t,"credentials_type"),n=(0,D.u9)(a,"credentials_type"),i=[{key:"emailPassword",value:f.zR.USER_PASS,label:e("credentialsOptions.emailPassword")},{key:"O365",value:f.zR.MICROSOFT,label:e("credentialsOptions.O365")}];return(0,_.jsx)(h.Z.Select,{"data-testid":"credentials",helperText:n&&r?void 0:e("fields.credentialPlaceholder"),id:"credentials_type",name:"credentials_type",tag:e("fields.credentialsType"),values:i})},q=()=>{const e=(0,v.mx)();return(0,_.jsxs)(u.Z,{alignItems:"flex-start",flexGrow:1,spacing:2,children:[(0,_.jsx)(h.Z.TextField,{"data-testid":"name",fullWidth:!0,id:"name",inputProps:{maxLength:255},label:e("fields.customer"),name:"name",type:"text"}),(0,_.jsxs)(u.Z,{alignItems:"flex-start",direction:"row",justifyContent:"flex-start",spacing:2,width:"100%",children:[(0,_.jsx)(O,{}),(0,_.jsx)(P,{})]})]})},I=()=>{const e=(0,d.s0)(),t=(0,v.mx)(),a=(0,s.useCallback)((()=>{e(n.Z6.home)}),[e]);return(0,_.jsxs)(u.Z,{direction:"row",justifyContent:"flex-end",mt:2,pb:2,spacing:2,children:[(0,_.jsx)(h.Z.DataBlock,{children:e=>{let{isSubmitting:n}=e;return(0,_.jsx)(y.Z,{color:"primary","data-testid":"form-actions-cancel",disabled:n,onClick:a,size:"large",variant:"outlined",children:(0,_.jsx)(r.Z,{color:"gradient",variant:"subtitle",children:t("cancel")})})}}),(0,_.jsx)(h.Z.SubmitButton,{"data-testid":"form-actions-send",size:"large",children:(0,_.jsx)(r.Z,{color:"text.primaryInverse",variant:"subtitle",children:t("create")})})]})},R=()=>{const e=(0,s.useRef)(),t=(0,d.s0)(),a=(0,v.mx)(),r=(0,v.Am)(),{obId:i}=(0,l.v9)(p.jo),[b]=(0,m.Nv)(),[g]=(0,m.oZ)(),y=[],j=(0,s.useMemo)((()=>o.Ry().shape({name:o.Z_().min(5,a("validations.nameLength")).test("checkDuplicateUsername",(0,x.HJ)(r,a("validations.nameExists")),(async e=>{if(null!==e&&void 0!==e&&e.length){const t=y.find((t=>{let{name:a}=t;return a.toLowerCase()===e.toLowerCase()}));return!Boolean(t)}return!0})).required((0,x.Zp)(r,a("validations.nameRequired"))),notification_email:o.Z_().email((0,x.FH)(r,a("validations.emailInvalidFormat"))).required((0,x.Zp)(r,a("validations.emailRequired"))),credentials_type:o.Z_().required((0,x.Zp)(r,a("validations.credentialRequired")))})),[a,r,y]),Z=(0,s.useMemo)((()=>({name:"",notification_email:"",credentials_type:"",platform:"PADEL-APP"})),[]),C=(0,s.useCallback)((e=>{let{name:t}=e;return{customer:t}}),[]),w=(0,s.useCallback)((async e=>{const t=new FormData;return t.append("data",JSON.stringify({status:f.Gi.ACTIVE})),await g({body:t,customerId:e}).unwrap()}),[g]),k=(0,s.useCallback)((async t=>{var a;const r=new FormData;var n,i;null!==(a=e.current)&&void 0!==a&&a.file&&r.append("logo_data",null===(n=e.current)||void 0===n?void 0:n.file,null===(i=e.current)||void 0===i?void 0:i.file.name);r.append("data",JSON.stringify(t));try{const{id:e}=await b(r).unwrap();await w(e)}catch(s){throw s}return!0}),[w,b]),S=(0,s.useCallback)((()=>{t(n.Z6.home)}),[t]);return(0,_.jsxs)(h.Z,{entity:Z,errorOn:"snackbar",onSubmit:k,onSubmitSuccess:S,snackbarTranslationParams:C,successOn:"snackbar",translationKey:"operatorNewCustomer",validation:j,children:[(0,_.jsx)(c.Z,{children:(0,_.jsx)(h.Z.LayoutBlock,{subtitle:a("subTitle"),title:a("title"),children:(0,_.jsxs)(u.Z,{alignItems:"flex-start",direction:"row",justifyContent:"flex-start",spacing:2,children:[(0,_.jsx)(T,{ref:e}),(0,_.jsx)(q,{})]})})}),(0,_.jsx)(I,{})]})},B=()=>{const e=(0,v.mx)(),t=[{text:e("breadcrumbsMain"),route:n.Z6.operators},{text:e("breadcrumbView")}];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(i.B,{breadcrumbs:t}),(0,_.jsx)(r.Z,{color:"text.primary",mb:4,variant:"h1",children:e("breadcrumbView")}),(0,_.jsx)(R,{})]})}}}]);