"use strict";(self.webpackChunkpadel_app=self.webpackChunkpadel_app||[]).push([[2741],{47926:(e,t,r)=>{r.d(t,{DR:()=>o,Tj:()=>d,UQ:()=>i,a8:()=>u,x0:()=>l});r(21858);var s=r(66984),a=r(21895);const n=s.J.injectEndpoints({endpoints:e=>({availableCourts:e.query({query:e=>{let{customer_id:t,date:r}=e;return{url:"/customers/".concat(t,"/available-courts/"),params:{date:r}}},providesTags:[a.n.Reservations]}),createReservation:e.mutation({query:e=>{let{user_id:t,court_id:r,reservation_time:s,customer_id:a}=e;return{url:"/reservations/",method:"POST",body:{user_id:t,court_id:r,reservation_time:s,customer_id:a}}},providesTags:[a.n.Reservations]}),getUserReservations:e.query({query:e=>{let{user_id:t}=e;return{url:"/users/".concat(t,"/reservations/")}},providesTags:[a.n.Reservations]}),deleteReservation:e.mutation({query:e=>({url:"/reservations/".concat(e,"/"),method:"DELETE"}),invalidatesTags:[a.n.Reservations]}),getCustomerReservations:e.query({query:e=>{let{customer_id:t}=e;return{url:"/customers/".concat(t,"/reservations/")}},providesTags:[a.n.Reservations]}),getCustomerReservationsByDate:e.query({query:e=>{let{customer_id:t,from_date:r}=e;return{url:"/customers/".concat(t,"/reservations-by-date/"),params:r?{from_date:r}:{}}},providesTags:[a.n.Reservations]}),getReservationCountByCourt:e.query({query:e=>{let{customer_id:t}=e;return{url:"/customers/".concat(t,"/reservations/count-by-court/")}},providesTags:[a.n.Reservations]})})}),{useAvailableCourtsQuery:i,useCreateReservationMutation:o,useGetUserReservationsQuery:d,useDeleteReservationMutation:u,useGetCustomerReservationsQuery:l,useGetCustomerReservationsByDateQuery:c,useGetReservationCountByCourtQuery:v}=n},82741:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var s=r(47313),a=r(9506),n=r(85281),i=r(61113),o=r(9019),d=r(70501),u=r(89600),l=r(47926),c=r(58467),v=r(46417);const m=()=>{const[e,t]=(0,s.useState)(new Date),{customerId:r}=(0,c.UO)(),{data:m=[],isLoading:x}=(0,l.UQ)({customer_id:r,date:e.toISOString()}),{data:h=[],isLoading:g}=(0,l.x0)({customer_id:r});if((0,s.useEffect)((()=>{const e=setInterval((()=>{t(new Date)}),6e4);return()=>clearInterval(e)}),[]),x||g)return(0,v.jsx)(a.Z,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,v.jsx)(n.Z,{})});const p=m.filter((e=>!e.available)).length,y=m.filter((e=>e.available)).length;return(0,v.jsxs)(a.Z,{sx:{padding:4},children:[(0,v.jsx)(i.Z,{variant:"h4",gutterBottom:!0,children:"Dashboard - Gesti\xf3n de Pistas"}),(0,v.jsxs)(i.Z,{variant:"h6",sx:{color:"gray",mb:4},children:["Estado actual a las ",(0,u.Z)(e,"HH:mm:ss")," del ",(0,u.Z)(e,"dd/MM/yyyy")]}),(0,v.jsxs)(o.ZP,{container:!0,spacing:3,sx:{mb:4},children:[(0,v.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,v.jsxs)(d.Z,{sx:{padding:3,textAlign:"center"},children:[(0,v.jsx)(i.Z,{variant:"h6",children:"Pistas Ocupadas"}),(0,v.jsx)(i.Z,{variant:"h4",children:p})]})}),(0,v.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,v.jsxs)(d.Z,{sx:{padding:3,textAlign:"center"},children:[(0,v.jsx)(i.Z,{variant:"h6",children:"Pistas Disponibles"}),(0,v.jsx)(i.Z,{variant:"h4",children:y})]})}),(0,v.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,v.jsxs)(d.Z,{sx:{padding:3,textAlign:"center"},children:[(0,v.jsx)(i.Z,{variant:"h6",children:"Total Reservas"}),(0,v.jsx)(i.Z,{variant:"h4",children:h.length})]})})]}),(0,v.jsx)(i.Z,{variant:"h5",sx:{mb:2},children:"Estado de las Pistas (En este momento)"}),(0,v.jsx)(o.ZP,{container:!0,spacing:2,children:m.map((e=>(0,v.jsx)(o.ZP,{item:!0,xs:12,md:3,children:(0,v.jsxs)(d.Z,{sx:{padding:2,textAlign:"center",backgroundColor:e.available?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)",borderColor:e.available?"green":"red"},variant:"outlined",children:[(0,v.jsx)(i.Z,{variant:"h6",children:e.court_name}),(0,v.jsx)(i.Z,{variant:"body2",children:e.available?"Disponible":"Ocupada"})]})},e.court_id)))})]})}}}]);